(function(t){function e(e){for(var s,o,i=e[0],c=e[1],u=e[2],l=0,m=[];l<i.length;l++)o=i[l],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&m.push(r[o][0]),r[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);p&&p(e);while(m.length)m.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],s=!0,o=1;o<n.length;o++){var i=n[o];0!==r[i]&&(s=!1)}s&&(a.splice(e--,1),t=c(c.s=n[0]))}return t}var s={},o={app:0},r={app:0},a=[];function i(t){return c.p+"js/"+({about:"about"}[t]||t)+"."+{about:"a2c2c40f"}[t]+".js"}function c(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={about:1};o[t]?e.push(o[t]):0!==o[t]&&n[t]&&e.push(o[t]=new Promise(function(e,n){for(var s="css/"+({about:"about"}[t]||t)+"."+{about:"1374ab2c"}[t]+".css",r=c.p+s,a=document.getElementsByTagName("link"),i=0;i<a.length;i++){var u=a[i],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===s||l===r))return e()}var m=document.getElementsByTagName("style");for(i=0;i<m.length;i++){u=m[i],l=u.getAttribute("data-href");if(l===s||l===r)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var s=e&&e.target&&e.target.src||r,a=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=s,delete o[t],p.parentNode.removeChild(p),n(a)},p.href=r;var h=document.getElementsByTagName("head")[0];h.appendChild(p)}).then(function(){o[t]=0}));var s=r[t];if(0!==s)if(s)e.push(s[2]);else{var a=new Promise(function(e,n){s=r[t]=[e,n]});e.push(s[2]=a);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=i(t);var m=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(p);var n=r[t];if(0!==n){if(n){var s=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;m.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",m.name="ChunkLoadError",m.type=s,m.request=o,n[1](m)}r[t]=void 0}};var p=setTimeout(function(){u({type:"timeout",target:l})},12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},c.m=t,c.c=s,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)c.d(n,s,function(e){return t[e]}.bind(null,s));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/public/",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var m=0;m<u.length;m++)e(u[m]);var p=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var s=n("64a9"),o=n.n(s);o.a},"3e3f":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("7f7f"),n("cadf"),n("551c"),n("f751"),n("097d");var s=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{},attrs:{id:"app"}},[n("router-view")],1)},r=[],a={name:"app",data:function(){return{}}},i=a,c=(n("034f"),n("2877")),u=Object(c["a"])(i,o,r,!1,null,null,null),l=u.exports,m=n("8c4f"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"index"},[n("van-nav-bar",{attrs:{title:"在线好友("+(this.chatUserList.length-1)+")"}},[n("div",{attrs:{slot:"left"},slot:"left"},[n("van-icon",{attrs:{size:"20px",name:"add-o",color:"#737373"},on:{click:function(e){t.add=!t.add}}}),t.add?n("div",{staticClass:"index-add-wrap",on:{click:function(e){t.add=!t.add}}}):t._e(),t.add?n("div",{staticClass:"index-add-mask"},[n("div",{staticClass:"add-btn",on:{click:function(e){t.showPublic=!0,t.add=!1}}},[n("van-icon",{attrs:{size:"20px",name:"chat",color:"#fff"}}),t._v("发起公开群聊\n        ")],1),n("div",{staticClass:"add-btn",on:{click:function(e){t.showPrivate=!0,t.add=!1}}},[n("van-icon",{attrs:{size:"20px",name:"chat",color:"#fff"}}),t._v("发起私密群聊\n        ")],1)]):t._e(),n("van-dialog",{attrs:{title:"发起公开群聊","show-cancel-button":""},on:{confirm:t.createPublicGroup},model:{value:t.showPublic,callback:function(e){t.showPublic=e},expression:"showPublic"}},[n("van-cell-group",[n("van-field",{attrs:{value:"",label:"群组名","left-icon":"contact",placeholder:"输入群组名称"},model:{value:t.createGroupName,callback:function(e){t.createGroupName=e},expression:"createGroupName"}})],1)],1),n("van-dialog",{attrs:{title:"发起私密群聊","show-cancel-button":""},on:{confirm:t.createPrivateGroup},model:{value:t.showPrivate,callback:function(e){t.showPrivate=e},expression:"showPrivate"}},[n("van-cell-group",[n("van-field",{attrs:{value:"",label:"群组名","left-icon":"contact",placeholder:"输入群组名称"},model:{value:t.createGroupName,callback:function(e){t.createGroupName=e},expression:"createGroupName"}}),n("van-field",{attrs:{value:"",label:"用户列表","left-icon":"contact"}},[n("div",{attrs:{slot:"input"},slot:"input"},[n("van-checkbox-group",{model:{value:t.addResult,callback:function(e){t.addResult=e},expression:"addResult"}},t._l(this.chatUserList,function(e){return n("van-cell-group",[e.name!=t.name?n("van-cell",{key:e.name,attrs:{clickable:""}},[n("div",{attrs:{slot:"title"},slot:"title"},[n("van-icon",{staticClass:"custom-icon",attrs:{size:"28px",name:"http://juntao.oss-cn-shenzhen.aliyuncs.com/images/wechat/avatar/xX9hSG0utRz0hmC4hA5b4nWL46Jgn8YGhQ7psWyU.png"}}),n("span",{staticClass:"padding-left-8px"},[t._v(t._s(e.name))])],1),n("van-checkbox",{ref:"checkboxes",refInFor:!0,attrs:{slot:"right-icon",name:e.name},slot:"right-icon"})],1):t._e()],1)}),1)],1)])],1)],1)],1),n("div",{staticStyle:{height:"46px","line-height":"46px"},attrs:{slot:"right"},slot:"right"},[n("i",{staticStyle:{color:"rgb(30, 228, 32)"}},[t._v("•")]),t._v(" 在线\n    ")])]),n("van-cell-group",t._l(this.groupList,function(e){return n("van-cell",{attrs:{value:"12:00",to:{name:"message",params:{to_name:e,group:!0}}}},[n("template",{slot:"icon"},[n("van-icon",{staticClass:"custom-icon",attrs:{size:"60px",name:"http://juntao.oss-cn-shenzhen.aliyuncs.com/images/wechat/avatar/xX9hSG0utRz0hmC4hA5b4nWL46Jgn8YGhQ7psWyU.png"}})],1),n("template",{slot:"title"},[n("div",{staticStyle:{"padding-left":"10px"}},[n("span",{staticClass:"custom-text"},[t._v(t._s(e)+" (群聊)")])])])],2)}),1),n("van-cell-group",t._l(this.chatUserList,function(e){return e.name!=t.name?n("van-cell",{attrs:{value:"12:00",to:{name:"message",params:{to_name:e.name,group:!1}}}},[n("template",{slot:"icon"},[n("van-icon",{staticClass:"custom-icon",attrs:{size:"60px",name:"http://juntao.oss-cn-shenzhen.aliyuncs.com/images/wechat/avatar/xX9hSG0utRz0hmC4hA5b4nWL46Jgn8YGhQ7psWyU.png"}})],1),n("template",{slot:"title"},[n("div",{staticStyle:{"padding-left":"10px"}},[n("span",{staticClass:"custom-text"},[t._v(t._s(e.name))]),n("p",{staticStyle:{margin:"5px 0",color:"rgb(152, 152, 152)"}},[t._v(t._s(t.name))])])])],2):t._e()}),1),n("van-tabbar",{staticStyle:{height:"55px"},attrs:{route:""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("van-tabbar-item",{attrs:{replace:"",to:"/",info:"10",icon:"chat"}},[t._v("消息")]),n("van-tabbar-item",{attrs:{replace:"",to:"/about",icon:"manager"}},[t._v("个人")])],1)],1)},h=[],d=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),f=n("2f62"),g=n("bc3a"),v=n.n(g),b=n("2241");function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,s)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(n,!0).forEach(function(e){Object(d["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var x={name:"index",data:function(){return{active:0,list:[],name:"",add:!1,addResult:[],showPublic:!1,showPrivate:!1,createGroupName:""}},created:function(){this.name=this.$store.getters.user},methods:{debug:function(){v.a.get("http://web.zhbx/api/video/play/auth/fcec7d5010e34af892faa7108dc7c51e").then(function(t){console.log(t)}).catch(function(t){console.log(t)})},createPublicGroup:function(){if(""==this.createGroupName)return b["a"].alert({title:"请输入群组名称",message:"请输入正确的群组名称"}).then(function(){}),!1;var t={Source:7,From:this.name,To:"",Type:1,Content:this.createGroupName,SendAt:"2015"};this.ws.send(JSON.stringify(t))},createPrivateGroup:function(){console.log(this.createGroupName),console.log(this.addResult)}},computed:y({},Object(f["b"])(["ws","chatUserList","groupList"])),components:{}},S=x,O=(n("8fc1"),Object(c["a"])(S,p,h,!1,null,null,null)),j=O.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Message"},[n("van-nav-bar",{attrs:{"left-text":"返回",title:this.$route.params.to_name,"left-arrow":""},on:{"click-left":t.onClickLeft}}),this.$route.params.group?t._e():n("div",{staticStyle:{"padding-bottom":"300px"}},t._l(t.records,function(e){return n("div",{staticStyle:{"margin-top":"15px"}},[n("div",{style:e.from==t.user?"padding:0 15px 0 0;float:right":"padding:0 0 0 15px;float:left"},[n("van-icon",{attrs:{size:"40px",name:"http://juntao.oss-cn-shenzhen.aliyuncs.com/images/wechat/avatar/xX9hSG0utRz0hmC4hA5b4nWL46Jgn8YGhQ7psWyU.png"}})],1),n("div",{staticClass:"msg-content"},[n("div",{class:e.from==t.user?"right-msg":"left-msg",staticStyle:{"word-wrap":"break-word"}},[t._v("\n          "+t._s(1==e.type?e.content:"")+"\n          "),2==e.type?n("img",{attrs:{src:e.content}}):t._e()])])])}),0),this.$route.params.group?n("div",{staticStyle:{"padding-bottom":"300px"}},t._l(t.records,function(e){return n("div",{staticStyle:{"margin-top":"15px"}},[n("div",{style:e.from==t.user?"padding:0 15px 0 0;float:right":"padding:0 0 0 15px;float:left"},[n("van-icon",{attrs:{size:"40px",name:"http://juntao.oss-cn-shenzhen.aliyuncs.com/images/wechat/avatar/xX9hSG0utRz0hmC4hA5b4nWL46Jgn8YGhQ7psWyU.png"}})],1),n("div",{staticClass:"msg-content"},[n("p",{staticClass:"msg-name",style:e.from==t.user?"text-align: right":"text-align: left"},[t._v(t._s(e.from))]),n("div",{class:e.from==t.user?"right-msg":"left-msg",staticStyle:{"word-wrap":"break-word"}},[t._v("\n          "+t._s(1==e.type?e.content:"")+"\n          "),2==e.type?n("img",{attrs:{src:e.content}}):t._e()])])])}),0):t._e(),n("div",{staticClass:"send"},[n("van-row",[n("van-col",{staticClass:"controller",attrs:{span:"24"}},[n("div",{staticClass:"one"},[n("van-icon",{staticClass:"my-icon",attrs:{size:"20px",name:"volume",color:"#737373"}})],1),n("div",{staticClass:"two"},[n("van-field",{attrs:{placeholder:"请输入"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.send(e)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),n("div",{staticClass:"three"},[n("van-icon",{staticClass:"my-icon",attrs:{size:"20px",name:"smile-o",color:"#737373"},on:{click:function(e){return t.showBottom("emoji")}}}),n("van-icon",{staticClass:"my-icon",attrs:{size:"20px",name:"add",color:"#737373"},on:{click:function(e){return t.showBottom("pic")}}})],1)])],1),n("van-row",{directives:[{name:"show",rawName:"v-show",value:"emoji"==t.active,expression:"active == 'emoji'"}]},[n("van-col",{staticClass:"smile-content",staticStyle:{"background-color":"#f8f8f8"},attrs:{span:"24"}},[n("img",{staticClass:"smile-icon",attrs:{src:"https://raw.githubusercontent.com/tmm1/emoji-extractor/master/images/160x160/1.png",alt:""},on:{click:t.sendEmoji}}),n("img",{staticClass:"smile-icon",attrs:{src:"https://raw.githubusercontent.com/tmm1/emoji-extractor/master/images/160x160/198.png",alt:""},on:{click:t.sendEmoji}}),n("img",{staticClass:"smile-icon",attrs:{src:"https://raw.githubusercontent.com/tmm1/emoji-extractor/master/images/160x160/201.png",alt:""},on:{click:t.sendEmoji}}),n("img",{staticClass:"smile-icon",attrs:{src:"https://raw.githubusercontent.com/tmm1/emoji-extractor/master/images/160x160/202.png",alt:""},on:{click:t.sendEmoji}}),n("img",{staticClass:"smile-icon",attrs:{src:"https://raw.githubusercontent.com/tmm1/emoji-extractor/master/images/160x160/429.png",alt:""},on:{click:t.sendEmoji}}),n("img",{staticClass:"smile-icon",attrs:{src:"https://raw.githubusercontent.com/tmm1/emoji-extractor/master/images/160x160/430.png",alt:""},on:{click:t.sendEmoji}}),n("img",{staticClass:"smile-icon",attrs:{src:"https://raw.githubusercontent.com/tmm1/emoji-extractor/master/images/160x160/431.png",alt:""},on:{click:t.sendEmoji}}),n("img",{staticClass:"smile-icon",attrs:{src:"https://raw.githubusercontent.com/tmm1/emoji-extractor/master/images/160x160/432.png",alt:""},on:{click:t.sendEmoji}}),n("img",{staticClass:"smile-icon",attrs:{src:"https://raw.githubusercontent.com/tmm1/emoji-extractor/master/images/160x160/434.png",alt:""},on:{click:t.sendEmoji}}),n("img",{staticClass:"smile-icon",attrs:{src:"https://raw.githubusercontent.com/tmm1/emoji-extractor/master/images/160x160/438.png",alt:""},on:{click:t.sendEmoji}}),n("img",{staticClass:"smile-icon",attrs:{src:"https://raw.githubusercontent.com/tmm1/emoji-extractor/master/images/160x160/460.png",alt:""},on:{click:t.sendEmoji}}),n("img",{staticClass:"smile-icon",attrs:{src:"https://raw.githubusercontent.com/tmm1/emoji-extractor/master/images/160x160/701.png",alt:""},on:{click:t.sendEmoji}}),n("img",{staticClass:"smile-icon",attrs:{src:"https://raw.githubusercontent.com/tmm1/emoji-extractor/master/images/160x160/705.png",alt:""},on:{click:t.sendEmoji}}),n("img",{staticClass:"smile-icon",attrs:{src:"https://raw.githubusercontent.com/tmm1/emoji-extractor/master/images/160x160/703.png",alt:""},on:{click:t.sendEmoji}}),n("img",{staticClass:"smile-icon",attrs:{src:"https://raw.githubusercontent.com/tmm1/emoji-extractor/master/images/160x160/706.png",alt:""},on:{click:t.sendEmoji}}),n("img",{staticClass:"smile-icon",attrs:{src:"https://raw.githubusercontent.com/tmm1/emoji-extractor/master/images/160x160/719.png",alt:""},on:{click:t.sendEmoji}}),n("img",{staticClass:"smile-icon",attrs:{src:"https://raw.githubusercontent.com/tmm1/emoji-extractor/master/images/160x160/720.png",alt:""},on:{click:t.sendEmoji}}),n("img",{staticClass:"smile-icon",attrs:{src:"https://raw.githubusercontent.com/tmm1/emoji-extractor/master/images/160x160/725.png",alt:""},on:{click:t.sendEmoji}}),n("img",{staticClass:"smile-icon",attrs:{src:"https://raw.githubusercontent.com/tmm1/emoji-extractor/master/images/160x160/728.png",alt:""},on:{click:t.sendEmoji}}),n("img",{staticClass:"smile-icon",attrs:{src:"https://raw.githubusercontent.com/tmm1/emoji-extractor/master/images/160x160/741.png",alt:""},on:{click:t.sendEmoji}})])],1),n("van-row",{directives:[{name:"show",rawName:"v-show",value:"pic"==t.active,expression:"active == 'pic'"}]},[n("van-col",{staticStyle:{"background-color":"#f8f8f8"},attrs:{span:"24"}},[n("van-uploader",{staticStyle:{margin:"20px 15px"},attrs:{"after-read":t.onRead}},[n("van-icon",{staticClass:"send-pic",attrs:{size:"45px",name:"photo",color:"#737373"}}),n("div",{staticStyle:{"text-align":"center","font-size":"14px"}},[t._v("上传图片")])],1)],1)],1)],1)],1)},E=[];function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,s)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(n,!0).forEach(function(e){Object(d["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var T={name:"Message",data:function(){return{active:"",emoji:"http://juntao.oss-cn-shenzhen.aliyuncs.com/images/video/courses/packages/f2HQCKV4GMcG4Ajfu0z4eXHEJQ5vOdW6S3Mcc4oo.jpeg",value:"",records:{}}},components:{},created:function(){this.$route.params.group?this.records=this.$store.getters.getGroupBy(this.$route.params.to_name):this.records=this.$store.getters.getRecordBy(this.$route.params.to_name)},methods:{onClickLeft:function(){this.$router.push({name:"index",params:{}})},showBottom:function(t){this.active!=t?this.active=t:this.active=""},send:function(){var t={},e={};this.$route.params.group?t={Source:2,From:this.user,To:this.$route.params.to_name,Type:1,Content:this.value,SendAt:"2015"}:(t={Source:1,From:this.user,To:this.$route.params.to_name,Type:1,Content:this.value,SendAt:"2015"},e={from:this.$route.params.to_name,type:1,content:this.value},this.$store.dispatch("giveMe",e)),this.ws.send(JSON.stringify(t)),this.value=""},onRead:function(t){console.log(t)},sendEmoji:function(t){var e={},n={};this.$route.params.group?e={Source:2,From:this.user,To:this.$route.params.to_name,Type:1,Content:this.value,SendAt:"2015"}:(e={Source:1,From:this.user,To:this.$route.params.to_name,Type:2,Content:t.currentTarget.src,SendAt:"2015"},n={from:this.$route.params.to_name,type:2,is_me:!0,content:t.currentTarget.src},this.$store.dispatch("giveMe",n)),this.ws.send(JSON.stringify(e))}},computed:C({},Object(f["b"])(["ws","user"]))},P=T,L=(n("bd5c"),Object(c["a"])(P,k,E,!1,null,null,null)),$=L.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loign"},[n("van-cell-group",[n("van-field",{attrs:{required:"",clearable:"",label:"用户名","right-icon":"question-o",placeholder:"请输入用户名"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),n("van-field",{attrs:{required:"",type:"password",abel:"密码",placeholder:"请输入密码",label:"密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),n("van-button",{staticClass:"login-btn",attrs:{type:"default",size:"large"},on:{click:t.login}},[t._v("提交")])],1)},G=[];function U(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,s)}return n}function N(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?U(n,!0).forEach(function(e){Object(d["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var A={name:"login",data:function(){return{username:"",password:""}},methods:{login:function(){if(""==this.username||""==this.password)return b["a"].alert({title:"账号或密码错误",message:"请输入正确的账号和密码"}).then(function(){}),!1;this.$store.dispatch("InitWebSocket",{username:this.username,password:this.password}),this.ws.onopen=this.websocketOnOpen,this.ws.onmessage=this.websocketOnMessage,this.ws.onclose=this.websocketClose,this.ws.onerror=this.websocketError,1==this.$store.getters.isLogin&&this.$router.push({name:"index",params:{}})},websocketOnOpen:function(){var t={Source:4,From:this.user,To:"",Type:0,SendAt:""};this.$store.getters.ws.send(JSON.stringify(t)),t={Source:9,From:this.user,To:"",Type:0,SendAt:""},this.$store.getters.ws.send(JSON.stringify(t)),this.reset()},reset:function(){clearTimeout(this.$store.getters.timeoutObj),this.start()},start:function(){var t=this,e=setTimeout(function(){var e={type:"ping"};t.send(JSON.stringify(e))},this.timeout);this.$store.dispatch("SetTimeout",e)},websocketOnMessage:function(t){var e=JSON.parse(t.data);console.log(t.data),this.msgHandle(e),this.reset()},websocketClose:function(t){console.log("connection closed ("+t.code+")"),!1===this.$store.state.websocket.login&&this.reconnect(this.$store.state.websocket.url)},send:function(t){this.ws.send(t)},websocketError:function(t){this.reconnect(this.$store.state.websocket.url)},reconnect:function(){var t=this;if(!this.$store.state.websocket.lockReconnect){this.$store.state.websocket.lockReconnect=!0;var e=this;setTimeout(function(){t.initWebSocket(e.user,e.state.websocket.password),t.$store.state.websocket.lockReconnect=!1},2e3)}},msgHandle:function(t){switch(t.Source){case 1:this.giveMe(t);break;case 2:this.group(t);break;case 3:break;case 4:this.getUserList(t);break;case 5:this.addUser(t);break;case 6:this.removeUser(t);break;case 7:this.createPublicGroup(t);break;case 9:this.getGroupList(t);break}},getUserList:function(t){var e=JSON.parse(t.Content);this.$store.dispatch("setList",e)},getGroupList:function(t){var e=JSON.parse(t.Content);this.$store.dispatch("setGroupList",e)},createPublicGroup:function(t){console.log(t),this.$store.dispatch("creatGroup",t)},giveMe:function(t){var e={from:t.From,type:t.Type,content:t.Content};console.log(e),this.$store.dispatch("giveMe",e)},group:function(t){var e={from:t.From,to:t.To,type:t.Type,content:t.Content};console.log(e),this.$store.dispatch("group",e)},addUser:function(t){var e={name:t.Content};this.$store.dispatch("addUser",e),console.log(e),this.$store.dispatch("addRecord",t.Content)},removeUser:function(t){this.$store.dispatch("removeUser",t.Content)}},computed:N({},Object(f["b"])(["ws","user"])),components:{}},D=A,z=(n("d6db"),Object(c["a"])(D,R,G,!1,null,null,null)),M=z.exports;s["a"].use(m["a"]);var J=new m["a"]({routes:[{path:"/",name:"index",component:j},{path:"/message",name:"message",component:$},{path:"/login",name:"login",component:M},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}}]}),W={state:{ws:"",name:"",pwd:"",url:"ws://"+location.host+"/ws",timeoutObj:"",login:!1,lockReconnect:!1},mutations:{SET_WS:function(t,e){t.ws=e},SET_NAME:function(t,e){t.name=e},SET_PWD:function(t,e){t.pwd=e},SET_TIMEOUTOBJ:function(t,e){t.timeoutObj=e},SET_LOGIN:function(t,e){t.login=e}},getters:{isLogin:function(t){return t.login},ws:function(t){return t.ws},timeoutObj:function(t){return t.timeoutObj},user:function(t){return t.name}},actions:{InitWebSocket:function(t,e){var n=t.commit,s=t.state;n("SET_NAME",e.username),n("SET_PWD",e.password),n("SET_LOGIN",!0);var o=new WebSocket(s.url+"?name="+e.username+"&password="+e.password);n("SET_WS",o)},SendMsg:function(t){this.state.websocket.ws.send(t)},SetTimeout:function(t,e){var n=t.commit;n("SET_TIMEOUTOBJ",e)}}},B=W,I=(n("ac4d"),n("8a81"),{state:{username:"",avatar:"",userList:[],record:{},groupList:[],groups:{}},mutations:{SET_USERNAME:function(t,e){t.username=e},SET_AVATAR:function(t,e){t.avatar=e},SET_USERLIST:function(t,e){t.userList=e;var n=!0,s=!1,o=void 0;try{for(var r,a=e[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var i=r.value;t.record[i.name]=[]}}catch(c){s=!0,o=c}finally{try{n||null==a.return||a.return()}finally{if(s)throw o}}},SET_ADDUSER:function(t,e){t.userList.push(e)},SET_RENOVEUSER:function(t,e){var n=0;for(var s in t.userList)if(t.userList[s].name==e){n=s;break}t.userList.splice(n,1)},SET_RECOR:function(t,e){t.record[e]=[]},SET_ADDRECOR:function(t,e){t.record[e.from].push(e)},SET_GROUPLIST:function(t,e){console.log(e);var n=!0,s=!1,o=void 0;try{for(var r,a=e[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var i=r.value;t.groupList.push(i.name),t.groups[i.name]=[]}}catch(c){s=!0,o=c}finally{try{n||null==a.return||a.return()}finally{if(s)throw o}}},SET_GROUP:function(t,e){t.groupList.push(e.Content),t.groups[e.Content]=[]},SET_ADDGROUP:function(t,e){console.log(e),t.groups[e.to].push(e)}},getters:{name:function(t){return t.username},chatUserList:function(t){return t.userList},group:function(t){return t.group},groupList:function(t){return t.groupList},getRecordBy:function(t){return function(e){return t.record[e]}},getGroupBy:function(t){return function(e){return t.groups[e]}},getRecord:function(t){return t.record}},actions:{setList:function(t,e){var n=t.commit;n("SET_USERLIST",e)},setGroupList:function(t,e){var n=t.commit;n("SET_GROUPLIST",e)},creatGroup:function(t,e){var n=t.commit;n("SET_GROUP",e)},removeUser:function(t,e){var n=t.commit;n("SET_RENOVEUSER",e)},giveMe:function(t,e){var n=t.commit;n("SET_ADDRECOR",e)},group:function(t,e){var n=t.commit;n("SET_ADDGROUP",e)},addUser:function(t,e){var n=t.commit;n("SET_ADDUSER",e)},addRecord:function(t,e){var n=t.commit;n("SET_RECOR",e)}}}),F=I;s["a"].use(f["a"]);var Q=new f["a"].Store({modules:{websocket:B,chat:F}}),X=Q,q=n("b970"),H=(n("157a"),n("417e")),Y=n("3acc");s["a"].use(H["a"]).use(Y["a"]),s["a"].use(q["a"]),s["a"].config.productionTip=!1,J.beforeEach(function(t,e,n){X.getters.isLogin?("login"==t.name&&n({path:"/"}),n()):"login"==t.name?n():n({path:"/login"})}),new s["a"]({router:J,store:X,render:function(t){return t(l)}}).$mount("#app")},"64a9":function(t,e,n){},"8fc1":function(t,e,n){"use strict";var s=n("3e3f"),o=n.n(s);o.a},a9e7:function(t,e,n){},bd5c:function(t,e,n){"use strict";var s=n("dcc7"),o=n.n(s);o.a},d6db:function(t,e,n){"use strict";var s=n("a9e7"),o=n.n(s);o.a},dcc7:function(t,e,n){}});
//# sourceMappingURL=app.6ca46fd3.js.map